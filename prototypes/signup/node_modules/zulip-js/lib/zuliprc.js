"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _fsReadfilePromise = _interopRequireDefault(require("fs-readfile-promise"));

var _ini = require("ini");

function parseConfigFile(filename) {
  return (0, _fsReadfilePromise["default"])(filename).then(function (buf) {
    return buf.toString();
  }).then(_ini.parse).then(function (parsedConfig) {
    var config = {
      realm: parsedConfig.api.site,
      username: parsedConfig.api.email,
      apiKey: parsedConfig.api.key
    };
    config.apiURL = "".concat(parsedConfig.api.site, "/api/v1");
    return config;
  });
}

var _default = parseConfigFile;
exports["default"] = _default;